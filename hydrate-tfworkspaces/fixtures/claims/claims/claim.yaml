kind: TFWorkspaceClaim
lifecycle: production
name: test-soups-pre-vmss
system: "system:corpme"
version: "1.0"
providers:
  terraform:
    tfStateKey: e951e631-305a-414e-be4f-5562fc952121
    name: test-soups-pre-vmss
    source: remote
    module: git::https://github.com/test/tfm.git//modules/vmss-soups?ref=vmss-soups-v0.2.4
    values:
      common:
        resource_group_name: "test-shutter-pre"
        location: "westeurope"
        secure_boot_enabled: false
        tags:
          cliente: "corpme"
          tenant: "corpme"
          Producto: "shutter"
          application: "shutter"
          env: "pre"
      run_script:
        file: "/data/run_script.sh"
        vmss_mi_id: ${{ tfworkspace:test-soups-pre-iam:outputs.id }}
        registry: "acrnoreleases"
        keyvault: "test-soups-pre-kv"
        soup:
          docker_image: "my-test.azurecr.io/service/mytest/my-test:v1.22.0-pre_default"
    context:
      providers:
        - name: azure-provider-test
      backend:
        name: azure-backend-terraform
